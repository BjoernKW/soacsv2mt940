<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-soacsv2mt940">soacsv2mt940</a>
    <li><a href="#label-C3-9Cbersicht">Übersicht</a>
    <li><a href="#label-Aufruf">Aufruf</a>
    <li><a href="#label-Hintergrund">Hintergrund</a>
    <li><a href="#label-Umsetzung">Umsetzung</a>
    <li><a href="#label-Eingabe">Eingabe</a>
    <li><a href="#label-Verarbeitung">Verarbeitung</a>
    <li><a href="#label-Ausgabe">Ausgabe</a>
    <li><a href="#label-ToDo">ToDo</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./LICENSE.html">LICENSE</a>
  
    <li><a href="./README_html.html">README.html</a>
  
    <li><a href="./README_md.html">README</a>
  
    <li><a href="./Rakefile.html">Rakefile</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.md">

<p>&lt;meta charset=“utf-8”/&gt; &lt;link rel=“stylesheet” href=“<a
href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic</a>”&gt;
&lt;link rel=“stylesheet” href=“<a
href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css</a>”&gt;
&lt;link rel=“stylesheet”
href=“/Users/ms1/Programmierung/Sprachen/milligram/milligram.min.css”&gt;</p>

<h1 id="label-soacsv2mt940">soacsv2mt940<span><a href="#label-soacsv2mt940">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-C3-9Cbersicht">Übersicht<span><a href="#label-C3-9Cbersicht">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Convert Statement Of Account .CSV to MT940 (swift) format – Konvertierung
Bankauszüge im .CSV-Format ins MT940-Format (SWIFT)</p>

<h2 id="label-Aufruf">Aufruf<span><a href="#label-Aufruf">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Aufruf:</p>

<pre>soacsv2mt940 -c, --csv &lt;file&gt; [-m, --mt940 &lt;file&gt;] [-n, --nbr &lt;number&gt;] [-b, --balance &lt;amount&gt;]</pre>

<p>Beispiel:</p>

<pre>soacsvmt940 -c bank.csv --mt940 bank.txt -n 0 --balance -1523,89</pre>

<p>Parameter:</p>
<ul><li>
<p><code>-c, --csv &lt;filename&gt;</code>: Name der Eingabe-Datei im
.csv-Format, welche ins mt940-Format konvertiert werden soll.</p>
</li><li>
<p><code>-m, --mt940 &lt;filename&gt;</code>: optionaler Name der
Ausgabe-Datei; falls der Parameter nicht angegeben wird, wird der Name der
Eingabe-Datei genommen und statt der Endung .csv wird die Endung .mt940
angefügt.</p>
</li><li>
<p><code>-n, --nbr &lt;number&gt;</code>: optionale Kontoauszugs-Nr., welche
im Kopf-Bereich der mt940-Datei (Satzart :28c:) vermerkt wird. Wird der
Parameter nicht angegeben, wird 0 genommen.</p>
</li><li>
<p><code>-b, --balance &lt;amount&gt;</code>: optionaler Eröffungs-Saldo des
Kontoauszugs. Wird dieser nicht mit übergeben, so wird 0 genommen.</p>
</li><li>
<p><code>-h, --help</code>: Anzeigen der Hilfe.</p>
</li></ul>

<h2 id="label-Hintergrund">Hintergrund<span><a href="#label-Hintergrund">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Einsatz-Szenario: Konto bei der Commerzbank, Buchhaltung mittels Collmex;
automatische Übernahme der Auszüge der Commerzbank in die
Collmex-Buchhaltung.</p>

<p>Die Commerzbank liefert Bankauszüge aktuell in zwei Formaten aus: als
.CSV-Datei oder per HBCI mit Chipkarte (!). In Collmex können sie
allerdings entweder als MT940-Datei importiert oder per HBCI mit PIN (!)
eingelesen werden, so dass keine direkte Möglichkeit besteht, die Auszüge
von der Commerzbank in Collmex zu importieren.</p>

<p>Eine Option ist, die Kontoauszüge zunächst per HBCI mit Chipkarte in ein
kommerzielles Programm wie bspw. Bank X zu importieren und dann von dort
ins MT940-Format zu exportieren, um sie so wiederum nach Collmex zu
bekommen.</p>

<p>Da eine entsprechende Software dann aber ausschließlich zu diesem Zweck im
Einsatz wäre, kostenpflichtig ist und der für HBCI mit Chipkarte notwendige
Chipkartenleser unterwegs nur schwerlich einsetzbar ist, wird ein
Konvertierungsprogramm benötigt, welches die <a
href="data/test.csv">.CSV-Kontoauszugsdatei</a> der Commerzbank
entsprechend ins <a
href="http://de.wikipedia.org/wiki/MT940">MT940-Format</a> (<a
href="data/datenstruktur-mt940-swift.pdf">Details</a>)/ eine <a
href="data/soamt940_test_template.mt940">MT940-Datei</a> für den Import
nach Collmex umwandelt.</p>

<h2 id="label-Umsetzung">Umsetzung<span><a href="#label-Umsetzung">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Das Programm soll später nicht nur lokal sondern ggf. auch als Dienst /
Webservice laufen, weshalb es in Ruby umgesetzt ist.</p>

<h3 id="label-Eingabe">Eingabe<span><a href="#label-Eingabe">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Die Eingabe des Namens der zu verarbeitenden .CSV-Kontoauszugsdatei erfolgt
zunächst per Kommandozeile beim Aufruf des Programms durch Übergabe des
Dateinamens. Später soll die Datei per Datei-Browser ausgewählt werden
können.</p>

<p>Prüfungen beim Einlesen der Eingabedatei:</p>
<ul><li>
<p>Datei nicht vorhanden?</p>
</li><li>
<p>Datei leer?</p>
</li><li>
<p>Datei nicht im Format .csv?</p>
</li></ul>

<h3 id="label-Verarbeitung">Verarbeitung<span><a href="#label-Verarbeitung">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Parsen .CSV - ermitteln der Felder mit mindestens folgenden Prüfungen:</p>
<ul><li>
<p>Überschriftszeile vorhanden / entspricht Vorgabe?</p>
</li><li>
<p>Trennzeichen ist “;”?</p>
</li><li>
<p>Nicht alle Felder?</p>
</li><li>
<p>Felder enthalten gültige Werte?</p>
</li></ul>

<p>Umwandeln ins Format mt940 in den Schritten (gemäß <a
href="data/datenstruktur-mt940-swift.pdf">mt940-Dateiaufbau</a>):</p>
<ul><li>
<p>Kopf</p>
</li><li>
<p>Rumpf</p>
</li><li>
<p>Fuss</p>
</li></ul>

<h3 id="label-Ausgabe">Ausgabe<span><a href="#label-Ausgabe">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Die Ausgabe erfolgt im gleichen Verzeichnis und unter gleichem Namen wie
die Eingabe-Datei, nur mit der Endung .mt940, mit mindestens folgenden
Prüfungen:</p>
<ul><li>
<p>Ausgabedatei schon vorhanden?</p>
</li><li>
<p>Postfix Inkrement 1 an Dateinamen hängen, erneut versuchen (Schleife bis
Erfolg)</p>
</li><li>
<p>Ausgabedatei kann aus sonstigen Gründen nicht geschrieben werden?</p>
</li><li>
<p>Abbruch</p>
</li></ul>

<h3 id="label-ToDo">ToDo<span><a href="#label-ToDo">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Folgende Punkte sind noch umzusetzen:</p>

<p>v1.0:</p>
<ul><li>
<p>Abhängigkeit auf Filesystem/Verzeichnisstruktur aus <a
href="Rakefile.html">Rakefile</a> raus nehmen</p>
</li><li>
<p>Prüfen der Überschriftenzeile auf die notwendigen Felder / Struktur</p>
</li><li>
<p>Umstellung auf csv-Verarbeitung aus std-lib</p>
</li><li>
<p>Namensgebung Klassen, Methoden, Variablen optimieren</p>
</li><li>
<p>strftime auf .year, etc. umstellen?</p>
</li><li>
<p>GVC anhand :umsatzart setzen</p>
</li><li>
<p>Auf GEM umstellen</p>
</li></ul>

<p>v2.0:</p>
<ul><li>
<p>Datei per Dialog auswählen</p>
</li><li>
<p>Server-Version</p>
</li><li>
<p>Heroku-Deployment</p>
</li></ul>
<hr>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

