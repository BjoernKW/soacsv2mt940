<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README.html - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./LICENSE.html">LICENSE</a>
  
    <li><a href="./README_html.html">README.html</a>
  
    <li><a href="./README_md.html">README</a>
  
    <li><a href="./Rakefile.html">Rakefile</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.html">

<p>&lt;meta charset=“utf-8” /&gt;</p>

<p>&lt;link rel=“stylesheet” href=“<a
href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic</a>”
/&gt;</p>

<p>&lt;link rel=“stylesheet” href=“<a
href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css</a>”
/&gt;</p>

<p>&lt;link rel=“stylesheet”
href=“/Users/ms1/Programmierung/Sprachen/milligram/milligram.min.css” /&gt;</p>

<p>&lt;h1 id=“soacsv2mt940”&gt;soacsv2mt940&lt;/h1&gt;</p>

<p>&lt;h2 id=“bersicht”&gt;Übersicht&lt;/h2&gt; &lt;p&gt;Convert Statement Of
Account .CSV to MT940 (swift) format – Konvertierung Bankauszüge im
.CSV-Format ins MT940-Format (SWIFT)&lt;/p&gt;</p>

<p>&lt;h2 id=“aufruf”&gt;Aufruf&lt;/h2&gt; &lt;p&gt;Aufruf:&lt;/p&gt;</p>

<p>&lt;pre&gt;<code>soacsv2mt940 -c, --csv &amp;lt;file&amp;gt; [-m, --mt940
&amp;lt;file&amp;gt;] [-n, --nbr &amp;lt;number&amp;gt;] [-b, --balance
&amp;lt;amount&amp;gt;] </code>&lt;/pre&gt;</p>

<p>&lt;p&gt;Beispiel:&lt;/p&gt;</p>

<p>&lt;pre&gt;<code>soacsvmt940 -c bank.csv --mt940 bank.txt -n 0 --balance
-1523,89 </code>&lt;/pre&gt;</p>

<p>&lt;p&gt;Parameter:&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;&lt;code&gt;-c, --csv &amp;lt;filename&amp;gt;&lt;/code&gt;: Name der Eingabe-Datei im .csv-Format, welche ins mt940-Format konvertiert werden soll.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-m, --mt940 &amp;lt;filename&amp;gt;&lt;/code&gt;: optionaler Name der Ausgabe-Datei; falls der Parameter nicht angegeben wird, wird der Name der Eingabe-Datei genommen und statt der Endung .csv wird die Endung .mt940 angefügt.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n, --nbr &amp;lt;number&amp;gt;&lt;/code&gt;: optionale Kontoauszugs-Nr., welche im Kopf-Bereich der mt940-Datei (Satzart :28c:) vermerkt wird. Wird der Parameter nicht angegeben, wird 0 genommen.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-b, --balance &amp;lt;amount&amp;gt;&lt;/code&gt;: optionaler Eröffungs-Saldo des Kontoauszugs. Wird dieser nicht mit übergeben, so wird 0 genommen.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-h, --help&lt;/code&gt;: Anzeigen der Hilfe.&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;h2 id=“hintergrund”&gt;Hintergrund&lt;/h2&gt;
&lt;p&gt;Einsatz-Szenario: Konto bei der Commerzbank, Buchhaltung mittels
Collmex; automatische Übernahme der Auszüge der Commerzbank in die
Collmex-Buchhaltung.&lt;/p&gt;</p>

<p>&lt;p&gt;Die Commerzbank liefert Bankauszüge aktuell in zwei Formaten aus:
als .CSV-Datei oder per HBCI mit Chipkarte (!). In Collmex können sie
allerdings entweder als MT940-Datei importiert oder per HBCI mit PIN (!)
eingelesen werden, so dass keine direkte Möglichkeit besteht, die Auszüge
von der Commerzbank in Collmex zu importieren.&lt;/p&gt;</p>

<p>&lt;p&gt;Eine Option ist, die Kontoauszüge  zunächst per HBCI mit Chipkarte
in ein kommerzielles Programm wie bspw. Bank X zu importieren und dann von
dort ins MT940-Format zu exportieren, um sie so wiederum nach Collmex zu
bekommen.&lt;/p&gt;</p>

<p>&lt;p&gt;Da eine entsprechende Software dann aber ausschließlich zu diesem
Zweck im Einsatz wäre, kostenpflichtig ist und der für HBCI mit Chipkarte
notwendige Chipkartenleser unterwegs nur schwerlich einsetzbar ist, wird
ein Konvertierungsprogramm benötigt, welches die &lt;a
href=“data/test.csv”&gt;.CSV-Kontoauszugsdatei&lt;/a&gt; der Commerzbank
entsprechend ins &lt;a href=“<a
href="http://de.wikipedia.org/wiki/MT940">MT940-Format</a">de.wikipedia.org/wiki/MT940”>MT940-Format</a</a>&gt;
(&lt;a href=“data/datenstruktur-mt940-swift.pdf”&gt;Details&lt;/a&gt;)/
eine &lt;a
href=“data/soamt940_test_template.mt940”&gt;MT940-Datei&lt;/a&gt; für den
Import nach Collmex umwandelt.&lt;/p&gt;</p>

<p>&lt;h2 id=“umsetzung”&gt;Umsetzung&lt;/h2&gt; &lt;p&gt;Das Programm soll
später nicht nur lokal sondern ggf. auch als Dienst / Webservice laufen,
weshalb es in Ruby umgesetzt ist.&lt;/p&gt;</p>

<p>&lt;h3 id=“eingabe”&gt;Eingabe&lt;/h3&gt; &lt;p&gt;Die Eingabe des Namens
der zu verarbeitenden .CSV-Kontoauszugsdatei erfolgt zunächst per
Kommandozeile beim Aufruf des Programms durch Übergabe des Dateinamens.
Später soll die Datei per Datei-Browser ausgewählt werden können.&lt;/p&gt;</p>

<p>&lt;p&gt;Prüfungen beim Einlesen der Eingabedatei:&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;Datei nicht vorhanden?&lt;/li&gt;
&lt;li&gt;Datei leer?&lt;/li&gt;
&lt;li&gt;Datei nicht im Format .csv?&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;h3 id=“verarbeitung”&gt;Verarbeitung&lt;/h3&gt; &lt;p&gt;Parsen .CSV -
ermitteln der Felder mit mindestens folgenden Prüfungen:&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;Überschriftszeile vorhanden / entspricht Vorgabe?&lt;/li&gt;
&lt;li&gt;Trennzeichen ist “;”?&lt;/li&gt;
&lt;li&gt;Nicht alle Felder?&lt;/li&gt;
&lt;li&gt;Felder enthalten gültige Werte?&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;p&gt;Umwandeln ins Format mt940 in den Schritten (gemäß &lt;a
href=“data/datenstruktur-mt940-swift.pdf”&gt;mt940-Dateiaufbau&lt;/a&gt;):&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;Kopf&lt;/li&gt;
&lt;li&gt;Rumpf&lt;/li&gt;
&lt;li&gt;Fuss&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;h3 id=“ausgabe”&gt;Ausgabe&lt;/h3&gt; &lt;p&gt;Die Ausgabe erfolgt im
gleichen Verzeichnis und unter gleichem Namen wie die Eingabe-Datei, nur
mit der Endung .mt940, mit mindestens folgenden Prüfungen:&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;Ausgabedatei schon vorhanden?&lt;/li&gt;
&lt;li&gt;Postfix Inkrement 1 an Dateinamen hängen, erneut versuchen (Schleife bis Erfolg)&lt;/li&gt;
&lt;li&gt;Ausgabedatei kann aus sonstigen Gründen nicht geschrieben werden?&lt;/li&gt;
&lt;li&gt;Abbruch&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;h3 id=“todo”&gt;ToDo&lt;/h3&gt; &lt;p&gt;Folgende Punkte sind noch
umzusetzen:&lt;/p&gt;</p>

<p>&lt;p&gt;v1.0:&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;Abhängigkeit auf Filesystem/Verzeichnisstruktur aus Rakefile raus nehmen&lt;/li&gt;
&lt;li&gt;Prüfen der Überschriftenzeile auf die notwendigen Felder / Struktur&lt;/li&gt;
&lt;li&gt;Umstellung auf csv-Verarbeitung aus std-lib&lt;/li&gt;
&lt;li&gt;Namensgebung Klassen, Methoden, Variablen optimieren&lt;/li&gt;
&lt;li&gt;strftime auf .year, etc. umstellen?&lt;/li&gt;
&lt;li&gt;GVC anhand :umsatzart setzen&lt;/li&gt;
&lt;li&gt;Auf GEM umstellen&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;p&gt;v2.0:&lt;/p&gt;</p>

<p>&lt;ul&gt;</p>

<pre>&lt;li&gt;Datei per Dialog auswählen&lt;/li&gt;
&lt;li&gt;Server-Version&lt;/li&gt;
&lt;li&gt;Heroku-Deployment&lt;/li&gt;</pre>

<p>&lt;/ul&gt;</p>

<p>&lt;hr /&gt;</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

